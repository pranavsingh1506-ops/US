<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Fluorescent Love Universe (Rounded Font)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        /* CSS se poori screen ko cover karein */
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden; 
            background-color: #000000; /* Kala background */
            /* Default font for HTML text */
            font-family: 'Verdana', sans-serif; /* Simple, rounded, web-safe font */
            touch-action: none; 
        }
        #loveCanvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 1.2rem;
            z-index: 1000;
        }
    </style>
</head>
<body>

    <div id="loading-overlay">
        3D Universe load ho raha hai... Simple Rounded Font mein! üíñ
    </div>

    <canvas id="loveCanvas"></canvas>

    <script type="module">
        // --- ANIMATION CONSTANTS ---
        const PARTICLE_COUNT = 800;
        const MAX_Z_DISTANCE = 5000; 
        const BASE_SPEED = 1.0; 
        const SPREAD_RADIUS = 1000; 
        const HEART_PROBABILITY = 0.35; 
        const STAR_COUNT = 1000; 
        
        // --- AAPKE MESSAGES ---
        const TEXT_MESSAGES = [
            "I LOVE YOUU SOO MUCHHüíóü§ó",
            "I YAAD YOU ü•∫üíû",
            "NEVER WANTS TO LOOSE YOUü´∂üèªü§ó",
            "WANNA HUG YOU RNüò©ü´Çüíû",
            "WEEEüòèüéÄü§ó",
            "SMILE PLEASE ‚ò∫Ô∏èüíó",
            "üíãüíãüíãüíû"
        ];
        
        // --- COLOR AND STYLE SETTINGS ---
        const TEXT_COLOR = '#ff1aff'; // Ultra Bright Neon Pink
        const HEART_COLOR = '#FF0055'; 
        const STAR_COLOR = 0xFFFFFF; // White Glowing Stars
        
        // SUPER FLUORESCENT EFFECT
        const TEXT_GLOW_BLUR = 25; 
        const HEART_GLOW_BLUR = 20; 
        
        // FONT CHANGE: Simple rounded font stack
        const FONT_FAMILY = "'Arial Rounded MT Bold', Verdana, sans-serif"; 
        const FONT_WEIGHT = '700'; // Boldness retained

        let scene, camera, renderer, controls;
        let particlesGroup = new THREE.Group(); 
        let backgroundStars;
        let preRenderedTextures = []; 

        /**
         * Canvas Texture banata hai (Text/Heart)
         */
        function createParticleTexture(text, color, glowBlur, fontWeight, fontFamily) {
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            
            const fontSize = text.includes('‚ù§Ô∏è') || text.includes('üíã') ? 60 : 40; 
            const font = `${fontWeight} ${fontSize}px ${fontFamily}`; 
            const padding = 40; 

            // Canvas size calculate karein
            tempCtx.font = font;
            const textMetrics = tempCtx.measureText(text);
            tempCanvas.width = textMetrics.width + padding;
            tempCanvas.height = fontSize + padding;

            // Text properties set karein
            tempCtx.font = font;
            tempCtx.textAlign = 'center';
            tempCtx.textBaseline = 'middle';
            
            // SUPER FLUORESCENT EFFECT: Glow/Blur
            tempCtx.shadowBlur = glowBlur; 
            tempCtx.shadowColor = color;
            tempCtx.fillStyle = color;

            // Text ko draw karein
            tempCtx.fillText(text, tempCanvas.width / 2, tempCanvas.height / 2 + (fontSize / 10));

            const texture = new THREE.CanvasTexture(tempCanvas);
            texture.needsUpdate = true;
            
            return {
                texture: texture,
                width: tempCanvas.width,
                height: tempCanvas.height
            };
        }
        
        /**
         * Chhote, non-moving particles (Stars/Dust) ko banata hai.
         */
        function createBackgroundStars() {
            const geometry = new THREE.BufferGeometry();
            const positions = [];
            
            const starMaterial = new THREE.PointsMaterial({
                size: 2.5, // Small glowing dust
                color: STAR_COLOR,
                blending: THREE.AdditiveBlending,
                transparent: true,
                opacity: 0.8
            });

            for (let i = 0; i < STAR_COUNT; i++) {
                const x = THREE.MathUtils.randFloatSpread(MAX_Z_DISTANCE * 3);
                const y = THREE.MathUtils.randFloatSpread(MAX_Z_DISTANCE * 3);
                const z = THREE.MathUtils.randFloat(-MAX_Z_DISTANCE * 1, MAX_Z_DISTANCE * 3);
                
                positions.push(x, y, z);
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            
            backgroundStars = new THREE.Points(geometry, starMaterial);
            scene.add(backgroundStars);
        }

        /**
         * Sabhi Text aur Heart assets ko load hone se pehle render karta hai.
         */
        function preRenderAssets() {
            // Text Message Textures
            TEXT_MESSAGES.forEach(() => {
                preRenderedTextures.push({
                    type: 'text',
                    ...createParticleTexture(TEXT_MESSAGES[Math.floor(Math.random() * TEXT_MESSAGES.length)], TEXT_COLOR, TEXT_GLOW_BLUR, FONT_WEIGHT, FONT_FAMILY),
                    color: TEXT_COLOR,
                });
            });

            // Heart Texture
            preRenderedTextures.push({
                type: 'heart',
                ...createParticleTexture('‚ù§Ô∏è', HEART_COLOR, HEART_GLOW_BLUR, 'normal', FONT_FAMILY), 
                color: HEART_COLOR,
            });
            
            document.getElementById('loading-overlay').style.display = 'none';
        }

        /**
         * Three.js scene, camera, aur controls ko initialize karta hai.
         */
        function init() {
            preRenderAssets();

            // 1. Scene Setup
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            scene.fog = new THREE.Fog(0x000000, 500, MAX_Z_DISTANCE * 0.9); 
            
            // 2. Camera Setup 
            camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 1, MAX_Z_DISTANCE + 100);
            camera.position.z = MAX_Z_DISTANCE * 0.2; 
            
            // 3. Renderer Setup
            const canvas = document.getElementById('loveCanvas');
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);

            // 4. Orbit Controls Setup 
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; 
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 500; 
            controls.maxDistance = MAX_Z_DISTANCE * 0.7;

            // 5. Particles create karein
            createParticles();
            createBackgroundStars(); 
            
            scene.add(particlesGroup);
            
            window.addEventListener('resize', onWindowResize, false);
            animate();
        }

        /**
         * Sabhi Particle Meshes ko banata hai (Text aur Heart)
         */
        function createParticles() {
            const textAssets = preRenderedTextures.filter(a => a.type === 'text');
            const heartAsset = preRenderedTextures.find(a => a.type === 'heart');

            for (let i = 0; i < PARTICLE_COUNT; i++) {
                const isHeart = Math.random() < HEART_PROBABILITY; 
                const asset = isHeart ? heartAsset : textAssets[Math.floor(Math.random() * textAssets.length)];
                
                const material = new THREE.SpriteMaterial({
                    map: asset.texture,
                    color: 0xFFFFFF,
                    blending: THREE.AdditiveBlending, 
                    transparent: true
                });

                const sprite = new THREE.Sprite(material);

                const p = {};
                p.z = Math.random() * MAX_Z_DISTANCE;
                
                const distance = Math.random() * SPREAD_RADIUS;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(Math.random() * 2 - 1);
                
                sprite.position.x = distance * Math.sin(phi) * Math.cos(theta);
                sprite.position.y = distance * Math.sin(phi) * Math.sin(theta);
                sprite.position.z = p.z;
                
                sprite.userData.velocity = Math.random() * 0.7 + BASE_SPEED;
                sprite.userData.isHeart = isHeart;
                
                const initialScale = isHeart ? 30 : 70;
                sprite.scale.set(initialScale, initialScale, 1);
                
                particlesGroup.add(sprite);
            }
        }

        /**
         * Main animation loop.
         */
        function animate() {
            requestAnimationFrame(animate);

            controls.update();

            // Particle movement (Tunnel effect)
            particlesGroup.children.forEach(sprite => {
                const speed = sprite.userData.velocity;
                
                sprite.position.z -= speed;

                // Loop effect
                if (sprite.position.z < camera.near) {
                    sprite.position.z = MAX_Z_DISTANCE;
                    
                    const distance = Math.random() * SPREAD_RADIUS;
                    const theta = Math.random() * Math.PI * 2;
                    const phi = Math.acos(Math.random() * 2 - 1);
                    
                    sprite.position.x = distance * Math.sin(phi) * Math.cos(theta);
                    sprite.position.y = distance * Math.sin(phi) * Math.sin(theta);
                    
                    sprite.userData.velocity = Math.random() * 0.7 + BASE_SPEED;
                }
                
                // Opacity Adjustment (Door waale dhundle)
                const distanceRatio = 1 - (sprite.position.z / MAX_Z_DISTANCE);
                sprite.material.opacity = distanceRatio * 0.7 + 0.3; 
                
                // Hearts ke liye halke floating effect
                if (sprite.userData.isHeart) {
                    sprite.position.x += Math.sin(Date.now() * 0.0005 + sprite.position.z) * 0.1;
                    sprite.position.y += Math.cos(Date.now() * 0.0003 + sprite.position.z) * 0.1;
                }
            });

            // Scene render karein
            renderer.render(scene, camera);
        }

        /**
         * Window resize hone par scene adjust karein
         */
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // Window load hone par init function call karein
        window.onload = init;
    </script>

</body>
</html>
